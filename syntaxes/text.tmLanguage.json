{
    "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "name": "NLFilters",
    "scopeName": "source.nlfilters",
    "patterns": [
        { "include": "#comments" },
        { "include": "#scriptSection" },
        { "include": "#styleSection" },
        { "include": "#replaceSection" },
        { "include": "#otherSections" },
        { "include": "#definitions" }
    ],
    "repository": {
        "comments": {
            "patterns": [{
                "match": "^#.*$",
                "name": "comment.line.nlfilters"
            }]
        },
        "definitions": {
            "patterns": [{
                "match": "^(Name|URL|FullURL|Multi|EachLine|Require|idGroup|RequireHeader|ContentType|MatchLocal|AddList|AddVariable)\\s*=\\s*(.*)$",
                "captures": {
                    "1": { "name": "keyword.other.definition.nlfilters" },
                    "2": { "name": "string.unquoted.nlfilters" }
                }
            }]
        },
        "scriptSection": {
            "begin": "^\\[Script\\]$",
            "end": "^(?=\\[)",
            "beginCaptures": {
                "0": { "name": "keyword.control.section.nlfilters" }
            },
            "patterns": [
                { "include": "#comments" },
                { "include": "#definitions" },
                {
                    "begin": "^Append<$",
                    "end": "^>$",
                    "beginCaptures": {
                        "0": { "name": "keyword.control.block.nlfilters" }
                    },
                    "endCaptures": {
                        "0": { "name": "keyword.control.block.nlfilters" }
                    },
                    "contentName": "source.js",
                    "patterns": [
                        { "include": "source.js" }
                    ]
                }
            ]
        },
        "styleSection": {
            "begin": "^\\[Style\\]$",
            "end": "^(?=\\[)",
            "beginCaptures": {
                "0": { "name": "keyword.control.section.nlfilters" }
            },
            "patterns": [
                { "include": "#comments" },
                { "include": "#definitions" },
                {
                    "begin": "^Append<$",
                    "end": "^>$",
                    "beginCaptures": {
                        "0": { "name": "keyword.control.block.nlfilters" }
                    },
                    "endCaptures": {
                        "0": { "name": "keyword.control.block.nlfilters" }
                    },
                    "contentName": "source.css",
                    "patterns": [
                        { "include": "source.css" }
                    ]
                }
            ]
        },
        "replaceSection": {
            "begin": "^\\[Replace\\]$",
            "end": "^(?=\\[)",
            "beginCaptures": {
                "0": { "name": "keyword.control.section.nlfilters" }
            },
            "patterns": [
                { "include": "#comments" },
                { "include": "#definitions" },
                {
                    "begin": "^Match<$",
                    "end": "^>$",
                    "beginCaptures": {
                        "0": { "name": "keyword.control.block.nlfilters" }
                    },
                    "endCaptures": {
                        "0": { "name": "keyword.control.block.nlfilters" }
                    },
                    "contentName": "meta.embedded.block.html",
                    "patterns": [
                        { "include": "#regex" },
                        { "include": "text.html.basic" }
                    ]
                },
                {
                    "begin": "^Replace<$",
                    "end": "^>$",
                    "beginCaptures": {
                        "0": { "name": "keyword.control.block.nlfilters" }
                    },
                    "endCaptures": {
                        "0": { "name": "keyword.control.block.nlfilters" }
                    },
                    "contentName": "meta.embedded.block.html",
                    "patterns": [
                        { "include": "text.html.basic" }
                    ]
                }
            ]
        },
        "otherSections": {
            "patterns": [{
                "match": "^\\[(RequestHeader|Debug|Config)\\]$",
                "name": "keyword.control.section.nlfilters"
            }]
        },
        "regex": {
            "patterns": [
                {
                    "match": "\\\\[\\\\bfnrtv]",
                    "name": "constant.character.escape.nlfilters"
                },
                {
                    "match": "\\\\.",
                    "name": "constant.character.escape.nlfilters"
                },
                {
                    "match": "[\\[\\](){}?+*|^$.]",
                    "name": "keyword.operator.regex.nlfilters"
                },
                {
                    "match": "\\$[0-9]+",
                    "name": "variable.other.regex.nlfilters"
                }
            ]
        }
    }
}